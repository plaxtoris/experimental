<!DOCTYPE html>
<html lang="de">
<head>

    <!-- google adsense-->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9132200753480301"
        crossorigin="anonymous"></script>

    <!-- google analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-N683YEPLY8"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-N683YEPLY8');
    </script>

    <!-- google ads -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-858239183"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'AW-858239183');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zauberohren - Interaktive Geschichten für Kinder">
    <meta name="theme-color" content="#5B63F5">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Zauberohren">
    <title>Zauberohren - Geschichten für dich</title>
    
    <!-- DNS-Prefetch und Preconnect für externe Ressourcen -->
    <link rel="dns-prefetch" href="https://www.googletagmanager.com">
    <link rel="dns-prefetch" href="https://pagead2.googlesyndication.com">
    <link rel="preconnect" href="https://www.googletagmanager.com">
    <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin>
    
    <!-- Preload kritische Ressourcen -->
    <link rel="preload" href="/static/style.css" as="style">
    <link rel="preload" href="/static/logo.jpeg" as="image" fetchpriority="high">
    
    <!-- Kritisches CSS inline für schnelleres FCP -->
    <style>
        :root {
            --primary-color: #5B63F5;
            --primary-hover: #4950E4;
            --text-primary: #1F2937;
            --text-secondary: #4B5563;
            --bg-primary: #FFFFFF;
            --bg-secondary: #F9FAFB;
            --border-color: #E5E7EB;
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --header-height: 72px;
            --player-height: 88px;
            --font-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        *, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }
        html { font-size: 16px; -webkit-font-smoothing: antialiased; }
        body { font-family: var(--font-sans); font-size: 1rem; line-height: 1.5; color: var(--text-primary); background: var(--bg-primary); min-height: 100vh; padding-bottom: var(--player-height); }
        h1 { font-weight: 600; line-height: 1.25; }
        #player-header { position: sticky; top: 0; z-index: 1000; background: var(--bg-primary); border-bottom: 1px solid var(--border-color); height: var(--header-height); }
        .header-top { display: flex; align-items: center; justify-content: space-between; height: 100%; max-width: 1280px; margin: 0 auto; padding: 0 1rem; }
        .logo-container { display: flex; align-items: center; gap: 0.75rem; }
        .logo { width: 3rem; height: 3rem; border-radius: 0.75rem; object-fit: cover; }
        .title-container h1 { font-size: 1.5rem; color: var(--primary-color); margin: 0; }
        .subtitle { font-size: 0.875rem; color: var(--text-secondary); }
        .themes-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 1.5rem; padding: 2rem 1rem; max-width: 1280px; margin: 0 auto; }
        .hidden { display: none !important; }
        /* Burger Menu für Mobile */
        .burger-menu { display: none; background: transparent; border: none; cursor: pointer; padding: 0.5rem; position: relative; width: 40px; height: 40px; }
        .burger-line { display: block; position: absolute; width: 24px; height: 3px; background: var(--text-secondary); transition: all 200ms ease; border-radius: 2px; left: 8px; }
        .burger-line:nth-child(1) { transform: translateY(-8px); }
        .burger-line:nth-child(2) { transform: translateY(0); }
        .burger-line:nth-child(3) { transform: translateY(8px); }
        .header-links { display: flex; align-items: center; gap: 1rem; }
        @media (max-width: 768px) { .burger-menu { display: flex; } .header-links { display: none; } }
    </style>
    
    <link rel="manifest" href="/static/manifest.json">
    <!-- Dynamic icons generated from single source -->
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="/icon/180.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/icon/32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/icon/16.png">
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>
    <!-- google add placement -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9132200753480301"
        crossorigin="anonymous"></script>
    <!-- slim -->
    <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-9132200753480301"
        data-ad-slot="9323593032"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
    <header id="player-header">
        <div class="header-top">
            <div class="logo-container">
                <img src="/static/logo.jpeg" alt="Zauberohren Logo" class="logo" loading="eager" fetchpriority="high" width="48" height="48">
                <div class="title-container">
                    <h1>Zauberohren</h1>
                    <span class="subtitle">Geschichten für dich</span>
                </div>
            </div>
            <button class="burger-menu" id="burger-menu" aria-label="Menü öffnen" type="button">
                <span class="burger-line"></span>
                <span class="burger-line"></span>
                <span class="burger-line"></span>
            </button>
            <nav class="header-links" id="nav-menu" role="navigation" aria-label="Hauptnavigation">
                <a href="/about" class="impressum-link">Über uns</a>
                <a href="/impressum" class="impressum-link">Impressum</a>
                <a href="/admin" class="impressum-link">Login</a>
            </nav>
        </div>
    </header>
    
    <main role="main">
        <section id="themes-grid" class="themes-grid" aria-label="Themenauswahl">
        </section>
    </main>
    
    <div id="audio-player" class="hidden" role="region" aria-label="Audio-Player">
        <div class="player-container">
            <div class="player-main">
                <button id="play-pause-btn" class="control-btn" aria-label="Play/Pause" type="button">
                    <svg class="play-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M8 5v14l11-7z"/>
                    </svg>
                    <svg class="pause-icon hidden" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <rect x="6" y="4" width="4" height="16"/>
                        <rect x="14" y="4" width="4" height="16"/>
                    </svg>
                </button>
                <button id="shuffle-btn" class="control-btn" aria-label="Shuffle" type="button">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M6 6v12l8-6z"/>
                        <path d="M14 6v12l8-6z"/>
                    </svg>
                </button>
                <div class="seek-container">
                    <span class="time-display time-current" id="time-current">0:00</span>
                    <input type="range" id="seek-bar" min="0" max="100" value="0" step="0.1" aria-label="Wiedergabeposition">
                    <span class="time-display time-total" id="time-total">0:00</span>
                </div>
                <button id="mute-btn" class="control-btn mute-btn" aria-label="Stummschalten" type="button">
                    <svg class="volume-icon" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                    <svg class="muted-icon hidden" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"/>
                    </svg>
                </button>
                <input type="range" id="volume-control" min="0" max="100" value="70" aria-label="Lautstärke">
            </div>
            <div class="player-title">
                <span id="current-title">Kein Titel ausgewählt</span>
            </div>
        </div>
    </div>
    
    <audio id="audio-element" preload="metadata"></audio>
    
    <script defer src="/static/utils.js"></script>
    <script defer src="/static/burger-menu.js"></script>
    <script defer src="/static/main.js"></script>
    
    <script>
        // Service Worker mit Verzögerung registrieren, um Initial Load nicht zu blockieren
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // 2 Sekunden warten nach Page Load
                setTimeout(() => {
                    navigator.serviceWorker.register('/static/service-worker.js')
                        .then(registration => console.log('ServiceWorker registered'))
                        .catch(err => console.log('ServiceWorker registration failed'));
                }, 2000);
            });
        }
    </script>
</body>
</html>